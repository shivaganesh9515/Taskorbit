<div class="page-container px-6 py-8">
  <!-- Profile Header -->
  <div
    class="flex flex-col lg:flex-row lg:justify-between lg:items-start gap-6 mb-8"
  >
    <div>
      <h1 class="text-4xl font-bold text-taskorbit-text-primary mb-2">
        👤 Profile Settings
      </h1>
      <p class="text-lg text-taskorbit-text-secondary">
        Manage your account settings and preferences
      </p>
    </div>

    <div class="flex gap-3">
      <button class="btn btn-glass btn-sm" (click)="resetToDefaults()">
        <span>🔄</span> Reset to Defaults
      </button>
      <button class="btn btn-primary btn-sm" (click)="saveProfile()">
        <span>💾</span> Save Changes
      </button>
    </div>
  </div>

  <div class="grid grid-cols-1 xl:grid-cols-4 gap-8">
    <!-- Left Sidebar - Profile Navigation -->
    <div class="xl:col-span-1">
      <div class="glass-card p-6 sticky top-6">
        <nav class="space-y-2">
          <button
            class="w-full flex items-center gap-3 px-4 py-3 text-left rounded-xl transition-all duration-200"
            [class.bg-taskorbit-accent-primary]="activeTab === 'general'"
            [class.text-white]="activeTab === 'general'"
            [class.bg-gray-50]="activeTab !== 'general'"
            [class.text-taskorbit-text-primary]="activeTab !== 'general'"
            (click)="setActiveTab('general')"
          >
            <span>⚙️</span>
            <span class="font-medium">General</span>
          </button>

          <button
            class="w-full flex items-center gap-3 px-4 py-3 text-left rounded-xl transition-all duration-200"
            [class.bg-taskorbit-accent-primary]="activeTab === 'security'"
            [class.text-white]="activeTab === 'security'"
            [class.bg-gray-50]="activeTab !== 'security'"
            [class.text-taskorbit-text-primary]="activeTab !== 'security'"
            (click)="setActiveTab('security')"
          >
            <span>🔒</span>
            <span class="font-medium">Security</span>
          </button>

          <button
            class="w-full flex items-center gap-3 px-4 py-3 text-left rounded-xl transition-all duration-200"
            [class.bg-taskorbit-accent-primary]="activeTab === 'notifications'"
            [class.text-white]="activeTab === 'notifications'"
            [class.bg-gray-50]="activeTab !== 'notifications'"
            [class.text-taskorbit-text-primary]="activeTab !== 'notifications'"
            (click)="setActiveTab('notifications')"
          >
            <span>🔔</span>
            <span class="font-medium">Notifications</span>
          </button>

          <button
            class="w-full flex items-center gap-3 px-4 py-3 text-left rounded-xl transition-all duration-200"
            [class.bg-taskorbit-accent-primary]="activeTab === 'preferences'"
            [class.text-white]="activeTab === 'preferences'"
            [class.bg-gray-50]="activeTab !== 'preferences'"
            [class.text-taskorbit-text-primary]="activeTab !== 'preferences'"
            (click)="setActiveTab('preferences')"
          >
            <span>🎨</span>
            <span class="font-medium">Preferences</span>
          </button>

          <button
            class="w-full flex items-center gap-3 px-4 py-3 text-left rounded-xl transition-all duration-200"
            [class.bg-taskorbit-accent-primary]="activeTab === 'billing'"
            [class.text-white]="activeTab === 'billing'"
            [class.bg-gray-50]="activeTab !== 'billing'"
            [class.text-taskorbit-text-primary]="activeTab !== 'billing'"
            (click)="setActiveTab('billing')"
          >
            <span>💳</span>
            <span class="font-medium">Billing</span>
          </button>
        </nav>
      </div>
    </div>

    <!-- Main Content Area -->
    <div class="xl:col-span-3">
      <!-- General Settings Tab -->
      <div class="glass-card p-8" *ngIf="activeTab === 'general'">
        <h2 class="text-2xl font-semibold text-taskorbit-text-primary mb-6">
          General Settings
        </h2>

        <form #profileForm="ngForm" class="space-y-6">
          <!-- Profile Picture Section -->
          <div class="flex items-start gap-6 pb-6 border-b border-gray-100">
            <div class="relative">
              <div
                class="w-24 h-24 bg-gradient-to-r from-taskorbit-accent-primary to-taskorbit-accent-secondary rounded-full flex items-center justify-center text-white text-2xl font-bold"
              >
                {{ getUserInitials() }}
              </div>
              <button
                class="absolute -bottom-2 -right-2 w-8 h-8 bg-white border-2 border-gray-200 rounded-full flex items-center justify-center hover:bg-gray-50 transition-colors duration-200"
              >
                📷
              </button>
            </div>

            <div class="flex-1">
              <h3 class="text-lg font-medium text-taskorbit-text-primary mb-2">
                Profile Picture
              </h3>
              <p class="text-sm text-taskorbit-text-secondary mb-4">
                Upload a profile picture to personalize your account
              </p>
              <div class="flex gap-3">
                <button type="button" class="btn btn-glass btn-sm">
                  Upload New
                </button>
                <button type="button" class="btn btn-glass btn-sm text-red-600">
                  Remove
                </button>
              </div>
            </div>
          </div>

          <!-- Personal Information -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="form-group">
              <label for="firstName">First Name</label>
              <input
                type="text"
                id="firstName"
                name="firstName"
                [(ngModel)]="userProfile.firstName"
                required
                class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-taskorbit-accent-primary focus:ring-2 focus:ring-taskorbit-accent-primary focus:ring-opacity-20"
              />
            </div>

            <div class="form-group">
              <label for="lastName">Last Name</label>
              <input
                type="text"
                id="lastName"
                name="lastName"
                [(ngModel)]="userProfile.lastName"
                required
                class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-taskorbit-accent-primary focus:ring-2 focus:ring-taskorbit-accent-primary focus:ring-opacity-20"
              />
            </div>

            <div class="form-group">
              <label for="email">Email Address</label>
              <input
                type="email"
                id="email"
                name="email"
                [(ngModel)]="userProfile.email"
                required
                email
                class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-taskorbit-accent-primary focus:ring-2 focus:ring-taskorbit-accent-primary focus:ring-opacity-20"
              />
            </div>

            <div class="form-group">
              <label for="phone">Phone Number</label>
              <input
                type="tel"
                id="phone"
                name="phone"
                [(ngModel)]="userProfile.phone"
                class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-taskorbit-accent-primary focus:ring-2 focus:ring-taskorbit-accent-primary focus:ring-opacity-20"
              />
            </div>

            <div class="form-group">
              <label for="jobTitle">Job Title</label>
              <input
                type="text"
                id="jobTitle"
                name="jobTitle"
                [(ngModel)]="userProfile.jobTitle"
                class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-taskorbit-accent-primary focus:ring-2 focus:ring-taskorbit-accent-primary focus:ring-opacity-20"
              />
            </div>

            <div class="form-group">
              <label for="department">Department</label>
              <select
                id="department"
                name="department"
                [(ngModel)]="userProfile.department"
                class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-taskorbit-accent-primary focus:ring-2 focus:ring-taskorbit-accent-primary focus:ring-opacity-20"
              >
                <option value="">Select Department</option>
                <option value="engineering">Engineering</option>
                <option value="design">Design</option>
                <option value="marketing">Marketing</option>
                <option value="sales">Sales</option>
                <option value="support">Support</option>
                <option value="hr">Human Resources</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="bio">Bio</label>
            <textarea
              id="bio"
              name="bio"
              [(ngModel)]="userProfile.bio"
              rows="4"
              placeholder="Tell us about yourself..."
              class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-taskorbit-accent-primary focus:ring-2 focus:ring-taskorbit-accent-primary focus:ring-opacity-20 resize-y"
            >
            </textarea>
          </div>
        </form>
      </div>

      <!-- Security Settings Tab -->
      <div class="glass-card p-8" *ngIf="activeTab === 'security'">
        <h2 class="text-2xl font-semibold text-taskorbit-text-primary mb-6">
          Security Settings
        </h2>

        <div class="space-y-8">
          <!-- Change Password Section -->
          <div class="pb-6 border-b border-gray-100">
            <h3 class="text-lg font-medium text-taskorbit-text-primary mb-4">
              Change Password
            </h3>
            <form class="space-y-4" #passwordForm="ngForm">
              <div class="form-group">
                <label for="currentPassword">Current Password</label>
                <input
                  type="password"
                  id="currentPassword"
                  name="currentPassword"
                  [(ngModel)]="passwordData.currentPassword"
                  required
                  class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-taskorbit-accent-primary focus:ring-2 focus:ring-taskorbit-accent-primary focus:ring-opacity-20"
                />
              </div>

              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="form-group">
                  <label for="newPassword">New Password</label>
                  <input
                    type="password"
                    id="newPassword"
                    name="newPassword"
                    [(ngModel)]="passwordData.newPassword"
                    required
                    minlength="8"
                    class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-taskorbit-accent-primary focus:ring-2 focus:ring-taskorbit-accent-primary focus:ring-opacity-20"
                  />
                </div>

                <div class="form-group">
                  <label for="confirmPassword">Confirm New Password</label>
                  <input
                    type="password"
                    id="confirmPassword"
                    name="confirmPassword"
                    [(ngModel)]="passwordData.confirmPassword"
                    required
                    class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-taskorbit-accent-primary focus:ring-2 focus:ring-taskorbit-accent-primary focus:ring-opacity-20"
                  />
                </div>
              </div>

              <button
                type="submit"
                class="btn btn-primary btn-sm"
                [disabled]="!passwordForm.valid || passwordData.newPassword !== passwordData.confirmPassword"
                (click)="changePassword()"
              >
                Update Password
              </button>
            </form>
          </div>

          <!-- Two-Factor Authentication -->
          <div class="pb-6 border-b border-gray-100">
            <div class="flex justify-between items-start">
              <div>
                <h3
                  class="text-lg font-medium text-taskorbit-text-primary mb-2"
                >
                  Two-Factor Authentication
                </h3>
                <p class="text-sm text-taskorbit-text-secondary">
                  Add an extra layer of security to your account
                </p>
              </div>
              <label class="relative inline-flex items-center cursor-pointer">
                <input
                  type="checkbox"
                  [(ngModel)]="securitySettings.twoFactorEnabled"
                  class="sr-only peer"
                />
                <div
                  class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-taskorbit-accent-primary peer-focus:ring-opacity-20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-taskorbit-accent-primary"
                ></div>
              </label>
            </div>
          </div>

          <!-- Active Sessions -->
          <div>
            <h3 class="text-lg font-medium text-taskorbit-text-primary mb-4">
              Active Sessions
            </h3>
            <div class="space-y-3">
              <div
                class="flex items-center justify-between p-4 bg-gray-50 rounded-xl"
                *ngFor="let session of activeSessions"
              >
                <div class="flex items-center gap-4">
                  <div
                    class="w-10 h-10 bg-taskorbit-accent-primary rounded-lg flex items-center justify-center text-white"
                  >
                    {{ session.device === 'desktop' ? '💻' : '📱' }}
                  </div>
                  <div>
                    <div class="font-medium text-taskorbit-text-primary">
                      {{ session.location }}
                    </div>
                    <div class="text-sm text-taskorbit-text-secondary">
                      {{ session.device }} • {{ session.lastActive }}
                    </div>
                  </div>
                </div>
                <button
                  class="text-red-600 hover:text-red-700 text-sm font-medium"
                  *ngIf="!session.current"
                  (click)="terminateSession(session.id)"
                >
                  Terminate
                </button>
                <span
                  class="text-green-600 text-sm font-medium"
                  *ngIf="session.current"
                >
                  Current Session
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Notifications Tab -->
      <div class="glass-card p-8" *ngIf="activeTab === 'notifications'">
        <h2 class="text-2xl font-semibold text-taskorbit-text-primary mb-6">
          Notification Preferences
        </h2>

        <div class="space-y-6">
          <div
            class="pb-6 border-b border-gray-100"
            *ngFor="let category of notificationCategories"
          >
            <h3 class="text-lg font-medium text-taskorbit-text-primary mb-4">
              {{ category.title }}
            </h3>
            <div class="space-y-4">
              <div
                class="flex justify-between items-center"
                *ngFor="let setting of category.settings"
              >
                <div>
                  <div class="font-medium text-taskorbit-text-primary">
                    {{ setting.label }}
                  </div>
                  <div class="text-sm text-taskorbit-text-secondary">
                    {{ setting.description }}
                  </div>
                </div>
                <div class="flex gap-4">
                  <label class="flex items-center gap-2 cursor-pointer">
                    <input
                      type="checkbox"
                      [(ngModel)]="setting.email"
                      class="w-4 h-4 text-taskorbit-accent-primary bg-gray-100 border-gray-300 rounded focus:ring-taskorbit-accent-primary focus:ring-2"
                    />
                    <span class="text-sm text-taskorbit-text-secondary"
                      >Email</span
                    >
                  </label>
                  <label class="flex items-center gap-2 cursor-pointer">
                    <input
                      type="checkbox"
                      [(ngModel)]="setting.push"
                      class="w-4 h-4 text-taskorbit-accent-primary bg-gray-100 border-gray-300 rounded focus:ring-taskorbit-accent-primary focus:ring-2"
                    />
                    <span class="text-sm text-taskorbit-text-secondary"
                      >Push</span
                    >
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Preferences Tab -->
      <div class="glass-card p-8" *ngIf="activeTab === 'preferences'">
        <h2 class="text-2xl font-semibold text-taskorbit-text-primary mb-6">
          App Preferences
        </h2>

        <div class="space-y-6">
          <!-- Theme Settings -->
          <div class="pb-6 border-b border-gray-100">
            <h3 class="text-lg font-medium text-taskorbit-text-primary mb-4">
              Theme
            </h3>
            <div class="grid grid-cols-3 gap-4">
              <label class="cursor-pointer">
                <input
                  type="radio"
                  name="theme"
                  value="light"
                  [(ngModel)]="preferences.theme"
                  class="sr-only peer"
                />
                <div
                  class="p-4 border-2 border-gray-200 rounded-xl peer-checked:border-taskorbit-accent-primary peer-checked:bg-taskorbit-accent-primary peer-checked:bg-opacity-5 transition-all duration-200"
                >
                  <div
                    class="w-full h-16 bg-white rounded-lg border border-gray-200 mb-2"
                  ></div>
                  <div class="text-center text-sm font-medium">Light</div>
                </div>
              </label>

              <label class="cursor-pointer">
                <input
                  type="radio"
                  name="theme"
                  value="dark"
                  [(ngModel)]="preferences.theme"
                  class="sr-only peer"
                />
                <div
                  class="p-4 border-2 border-gray-200 rounded-xl peer-checked:border-taskorbit-accent-primary peer-checked:bg-taskorbit-accent-primary peer-checked:bg-opacity-5 transition-all duration-200"
                >
                  <div class="w-full h-16 bg-gray-800 rounded-lg mb-2"></div>
                  <div class="text-center text-sm font-medium">Dark</div>
                </div>
              </label>

              <label class="cursor-pointer">
                <input
                  type="radio"
                  name="theme"
                  value="auto"
                  [(ngModel)]="preferences.theme"
                  class="sr-only peer"
                />
                <div
                  class="p-4 border-2 border-gray-200 rounded-xl peer-checked:border-taskorbit-accent-primary peer-checked:bg-taskorbit-accent-primary peer-checked:bg-opacity-5 transition-all duration-200"
                >
                  <div
                    class="w-full h-16 bg-gradient-to-r from-white to-gray-800 rounded-lg mb-2"
                  ></div>
                  <div class="text-center text-sm font-medium">Auto</div>
                </div>
              </label>
            </div>
          </div>

          <!-- Language and Region -->
          <div class="pb-6 border-b border-gray-100">
            <h3 class="text-lg font-medium text-taskorbit-text-primary mb-4">
              Language & Region
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="form-group">
                <label for="language">Language</label>
                <select
                  id="language"
                  [(ngModel)]="preferences.language"
                  class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-taskorbit-accent-primary focus:ring-2 focus:ring-taskorbit-accent-primary focus:ring-opacity-20"
                >
                  <option value="en">English</option>
                  <option value="es">Spanish</option>
                  <option value="fr">French</option>
                  <option value="de">German</option>
                </select>
              </div>

              <div class="form-group">
                <label for="timezone">Timezone</label>
                <select
                  id="timezone"
                  [(ngModel)]="preferences.timezone"
                  class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-taskorbit-accent-primary focus:ring-2 focus:ring-taskorbit-accent-primary focus:ring-opacity-20"
                >
                  <option value="UTC-8">Pacific Standard Time (UTC-8)</option>
                  <option value="UTC-5">Eastern Standard Time (UTC-5)</option>
                  <option value="UTC+0">Greenwich Mean Time (UTC+0)</option>
                  <option value="UTC+5:30">
                    India Standard Time (UTC+5:30)
                  </option>
                </select>
              </div>
            </div>
          </div>

          <!-- Other Preferences -->
          <div>
            <h3 class="text-lg font-medium text-taskorbit-text-primary mb-4">
              Other Settings
            </h3>
            <div class="space-y-4">
              <div class="flex justify-between items-center">
                <div>
                  <div class="font-medium text-taskorbit-text-primary">
                    Auto-save drafts
                  </div>
                  <div class="text-sm text-taskorbit-text-secondary">
                    Automatically save your work as you type
                  </div>
                </div>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input
                    type="checkbox"
                    [(ngModel)]="preferences.autoSave"
                    class="sr-only peer"
                  />
                  <div
                    class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-taskorbit-accent-primary peer-focus:ring-opacity-20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-taskorbit-accent-primary"
                  ></div>
                </label>
              </div>

              <div class="flex justify-between items-center">
                <div>
                  <div class="font-medium text-taskorbit-text-primary">
                    Show keyboard shortcuts
                  </div>
                  <div class="text-sm text-taskorbit-text-secondary">
                    Display keyboard shortcuts in tooltips
                  </div>
                </div>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input
                    type="checkbox"
                    [(ngModel)]="preferences.showShortcuts"
                    class="sr-only peer"
                  />
                  <div
                    class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-taskorbit-accent-primary peer-focus:ring-opacity-20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-taskorbit-accent-primary"
                  ></div>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Billing Tab -->
      <div class="glass-card p-8" *ngIf="activeTab === 'billing'">
        <h2 class="text-2xl font-semibold text-taskorbit-text-primary mb-6">
          Billing & Subscription
        </h2>

        <div class="space-y-8">
          <!-- Current Plan -->
          <div class="pb-6 border-b border-gray-100">
            <div class="flex justify-between items-start">
              <div>
                <h3
                  class="text-lg font-medium text-taskorbit-text-primary mb-2"
                >
                  Current Plan
                </h3>
                <div
                  class="text-2xl font-bold text-taskorbit-accent-primary mb-2"
                >
                  Professional Plan
                </div>
                <p class="text-sm text-taskorbit-text-secondary">
                  $29/month • Billed monthly
                </p>
              </div>
              <div class="text-right">
                <button class="btn btn-glass btn-sm mb-2">Change Plan</button>
                <div class="text-sm text-taskorbit-text-secondary">
                  Next billing: Aug 25, 2025
                </div>
              </div>
            </div>
          </div>

          <!-- Usage Statistics -->
          <div class="pb-6 border-b border-gray-100">
            <h3 class="text-lg font-medium text-taskorbit-text-primary mb-4">
              Usage This Month
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
              <div class="text-center p-4 bg-gray-50 rounded-xl">
                <div class="text-2xl font-bold text-taskorbit-text-primary">
                  125
                </div>
                <div class="text-sm text-taskorbit-text-secondary">
                  Tasks Created
                </div>
                <div class="text-xs text-green-600 mt-1">75% of limit</div>
              </div>
              <div class="text-center p-4 bg-gray-50 rounded-xl">
                <div class="text-2xl font-bold text-taskorbit-text-primary">
                  8
                </div>
                <div class="text-sm text-taskorbit-text-secondary">
                  Projects
                </div>
                <div class="text-xs text-green-600 mt-1">40% of limit</div>
              </div>
              <div class="text-center p-4 bg-gray-50 rounded-xl">
                <div class="text-2xl font-bold text-taskorbit-text-primary">
                  12
                </div>
                <div class="text-sm text-taskorbit-text-secondary">
                  Team Members
                </div>
                <div class="text-xs text-green-600 mt-1">60% of limit</div>
              </div>
            </div>
          </div>

          <!-- Payment Method -->
          <div>
            <h3 class="text-lg font-medium text-taskorbit-text-primary mb-4">
              Payment Method
            </h3>
            <div
              class="flex items-center justify-between p-4 bg-gray-50 rounded-xl"
            >
              <div class="flex items-center gap-4">
                <div
                  class="w-12 h-8 bg-blue-600 rounded flex items-center justify-center text-white text-xs font-bold"
                >
                  VISA
                </div>
                <div>
                  <div class="font-medium text-taskorbit-text-primary">
                    •••• •••• •••• 4242
                  </div>
                  <div class="text-sm text-taskorbit-text-secondary">
                    Expires 12/26
                  </div>
                </div>
              </div>
              <button class="btn btn-glass btn-sm">Update</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
